{"version":3,"sources":["src/components/modals/Login.js","src/screens/Login/head.js","src/screens/Login/index.js"],"names":["schema","type","properties","username","password","Login","props","Form","action","controller","Head","StyleSheet","create","NAME","rel","href","URL","user","redirect","useLoginRedirect","allowed","useRef","current","role","Header","LimitedContainer","onBeforeSubmit","onAfterSuccess","Footer","replace","to","getUrl"],"mappings":"kNAGMA,EAAS,CACbC,KAAM,SACNC,WAAY,CACVC,SAAU,CAAEF,KAAM,UAClBG,SAAU,CAAEH,KAAM,YAaPI,EATD,SAAAC,GAAK,OACjB,kBAACC,EAAA,EAAD,OACMD,EADN,CAEEE,OAAO,eACPC,WAAW,OACXT,OAAQA,M,uBCJCU,GAFSC,IAAWC,OAAO,IAEpB,kBAClB,kBAAC,IAAD,KACE,0CAAmBC,KACnB,0BAAMC,IAAI,YAAYC,KAASC,IAAL,WAC1B,+BACG,OCkCQX,UAvCD,SAACC,GAAW,IAChBW,EAASX,EAATW,KAEFC,EAAWC,YAAiBb,GAI5Bc,EAAUC,kBAAO,GAKvB,OAAKD,EAAQE,SAAyB,YAAdL,EAAKM,KAK3B,kBAAC,IAAD,KACE,kBAAC,EAAD,MACA,kBAACC,EAAA,EAAWlB,GACZ,kBAACmB,EAAA,EAAD,KACE,kBAAC,IAAD,8CAGA,kBAAC,EAAD,OACMnB,EADN,CAEEoB,eAlBe,WACrBN,EAAQE,SAAU,GAkBZK,eAAgBT,MAGpB,kBAACU,EAAA,EAAD,OAjBK,kBAAC,IAAD,CAAUC,SAAO,EAACC,GAAIC,YAAO","file":"static/js/13.25c15bb9.chunk.js","sourcesContent":["import React from 'react';\nimport Form from '../Form';\n\nconst schema = {\n  type: 'object',\n  properties: {\n    username: { type: 'string' },\n    password: { type: 'string' },\n  },\n};\n\nconst Login = props => (\n  <Form\n    {...props}\n    action=\"authenticate\"\n    controller=\"user\"\n    schema={schema}\n  />\n);\n\nexport default Login;\n","import React from 'react';\nimport { StyleSheet } from 'react-native';\nimport {\n  Helmet,\n  title,\n  style,\n  link,\n} from 'react-native-web-ui-components/Helmet';\nimport { URL, NAME } from '../../config';\n\nexport const styles = StyleSheet.create({});\n\nexport const Head = () => (\n  <Helmet>\n    <title>{`Login - ${NAME}`}</title>\n    <link rel=\"canonical\" href={`${URL}/login`} />\n    <style>\n      {''}\n    </style>\n  </Helmet>\n);\n","import React, { useRef } from 'react';\nimport PropTypes from 'prop-types';\nimport { Redirect } from 'react-router';\nimport { Text, MainContainer } from 'react-native-web-ui-components';\nimport useLoginRedirect from '../../utils/useLoginRedirect';\nimport getUrl from '../../utils/getUrl';\nimport Header from '../../components/Header';\nimport Footer from '../../components/Footer';\nimport LimitedContainer from '../../components/LimitedContainer';\nimport LoginForm from '../../components/modals/Login';\nimport { Head } from './head';\n\nconst Login = (props) => {\n  const { user } = props;\n\n  const redirect = useLoginRedirect(props);\n\n  // We don't want to redirect the user before\n  // they see the success message.\n  const allowed = useRef(false);\n  const onBeforeSubmit = () => {\n    allowed.current = true;\n  };\n\n  if (!allowed.current && user.role !== 'VISITOR') {\n    return <Redirect replace to={getUrl('/')} />;\n  }\n\n  return (\n    <MainContainer>\n      <Head />\n      <Header {...props} />\n      <LimitedContainer>\n        <Text>\n          Please input your login and password.\n        </Text>\n        <LoginForm\n          {...props}\n          onBeforeSubmit={onBeforeSubmit}\n          onAfterSuccess={redirect}\n        />\n      </LimitedContainer>\n      <Footer />\n    </MainContainer>\n  );\n};\n\nLogin.propTypes = {\n  user: PropTypes.shape().isRequired,\n};\n\nexport default Login;\n"],"sourceRoot":""}